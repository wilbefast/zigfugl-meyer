\documentclass[french,12pt]{report}
\usepackage[utf8]{inputenc}
\usepackage[francais]{babel}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage{ifpdf}
\usepackage{graphicx}
\usepackage{geometry}
\usepackage{color}
\usepackage{pdfpages}

\renewcommand{\familydefault}{\sfdefault}

\geometry{hmargin=50pt, vmargin=50pt}

\title{Rapport de projet : ZigFugl-Meyer}
\author{DYCE William \and MÉLIA Geoffrey}
\date{\today}
\ifpdf
	\pdfinfo 
	{
		/Author (wdyce, gmelia)
		/Title (Title (Rapport de projet))
		/Subject (Subject)
		/Keywords ()
		/CreationDate (\today)
	}
\fi

\begin{document}
	% Page de titre
	%\maketitle
	\thispagestyle{empty}
\begin{picture}(40,40)
\put(50,-600){\rule{.2mm}{21cm}}
\put(-50,-70){\rule{20cm}{.2mm}}

\put(70,-50){\textsc{\Huge{TER : ZigFugl-Meyer}}}
\put(360,-100){\textsc{\Large{Rapport de projet}}}

\put(100,-220){\textbf{\textsc{\large{Étudiants :}}}}
\put(100,-240){\textsc{\large{DYCE William, MÉLIA Geoffrey}}}

\put(100,-400){\textbf{\textsc{\large{Encadrant :}}}}
\put(180,-400){\textsc{\large{SEILLES Antoine}}}

\put(230,-530){\textsc{\large{Master informatique}}}
\put(205,-550){\textsc{\large{Année universitaire 2012-2013}}}
\end{picture}
	
	\thispagestyle{empty}
	\newpage
	
	% Sommaire
	\tableofcontents

	%Table des figures
	\listoffigures
	
	\newpage
	%TODO : grossir, centrer sur la page
	\section*{Remerciements}
	\addcontentsline{toc}{section}{Remerciements}
	\paragraph{}
	
\begin{itemize}
\item Antoine Seilles pour...
\item Ines Di Loreto
\item Julien Métrot et Karima Bakhti (et la jeune patiente) pour ...
\item Isabelle Laffont
\item Benoît Langes
\end{itemize}

\part{Rapport de projet}
\newpage
	\chapter{Introduction}
Les accidents vasculaires cérébraux (AVC) peuvent être la cause d'hémiplégie chez les personnes qui en sont victimes. La paralysie peut affecter une ou plusieurs parties du corps, jusqu'à être totale si la face, le tronc et les membres supérieurs et inférieurs sont paralysés. \\
La récupération des fonctions motrices, de la parole ou de la compréhension dépendent pour beaucoup de l'âge du patient et de son atteinte au niveau du cerveau.
		\section{Problématique}
Il existe de nombreux tests et échelles pour évaluer les capacités sensorimotrices de patients hémiplégiques \footnote{voir l'Analyse de la littérature \textit{Evaluation of the disabilities of hemiplegic patients [M.-C. Gellez-Leman et al.]}}. Cependant, les médecins se retrouvent souvent confrontés au problème de la précision des mesures lors des test. Si la question ne se pose pas pour les tests dits "fonctionnels" (ex : le patient arrive t-il à se servir un verre d'eau?), des mesures d'angles et de positions se révèlent souvent nécessaires pour valider ou non la réussite d'un test par le patient.
\\Or, il existe peu d'outils pour réaliser ces mesures, et ceux-ci ne font pas l'unanimité. Pour la mesure d'angle entre les membres du patient (pli de l'épaule, du coude, etc.), le goniomètre se révèle être l'outil le plus utilisé, mais probablement par défaut (cf \ref{lapeyronie}). On lui reprochera en effet d'être: 
\begin{itemize}
	\item {intrusif :} Il doit être en contact direct avec le patient, pouvant fausser la mesure ou aider/gêner le patient.
	\item {imprécis :} L'épaisseur de peau et de graisse ne permet pas d'évaluer correctement l'angle formé par les os.
	\item {inutilisé :} Des médecins pourtant équipés vont préférer juger à l'œil, pour un meilleur ratio temps/précision.
\end{itemize}
		\subsubsection{Le test de Fugl-Meyer}
Cette imprécision des mesures devient dès lors gênante lorsque c'est un test non pas fonctionnel, mais de déficience qui est considéré comme le "Gold Standard" dans le domaine : le score de Fugl Meyer [\ref{fugl_meyer}]. En effet, celui-ci consiste à évaluer les mouvements du patient lors de la réalisation de gestes très précis, incluant des mouvements "éliminatoires", qu'il faut donc être capable de mesurer.	
	
	L'idée s'est alors posée d'utiliser un autre moyen de mesure, moins intrusif, pour la réalisation de test de Fugl Meyer, largement utilisé dans le milieu de la réhabilitation, et de réfléchir aux possibilités d'enrichissement de celui-ci.
\newpage
		\section{Présentation du projet}
		
			\subsection{Étude de terrain} \label{etude_terrain}
		Le projet est avant tout une étude de faisabilité. Nous essayerons de voir
		à quel point nous pouvions procéder, avec un capteur de profondeur (en
		l'occurrence la Microsoft Kinect) et des bibliothèques et outils couramment 
		disponibles, à un test complet ou partiel de Fugl-Meyer.
		
		Nous étudierons donc d'une part les technologies disponibles pour la Kinect,
		et d'autre ce qu'est le test de Fugl-Meyer et quelles sont les 
		problématiques associées.
		
		\subsection{Prototype}
		Nous élaborerons ensuite une preuve de concept,données de tout c'est à dire un 
		prototype proposant au patient en cours de réhabilitation un test partiel 
		de Fugl-Meyer. Les points importants à considérer pour un tel prototype 
		sont~:
		\subsubsection{Automatisation et objectivité}
		Le système doit pouvoir procéder à une évaluation, de manière non-intrusive 
		et sans intervention externe, de ce qui se trouve devant lui. Il doit donc 
		proposer une série de notes objectives qui correspondent aux performances du 
		patient.
		\subsubsection{Aspect ludique~: "gamification"}
		La "gamification" est le processus qui consiste à ajouter des éléments 
		souvent associés au domaine du jeu (d'où le nom), comme des barres de
		progression ou des défis à relever, à une activité non-ludique. L'idée est 
		de favoriser l'implication et la motivation des participants. 
		Notons qu'il ne s'agit pas nécessairement de faire de l'activité en soi un 
		jeu.
    \subsubsection{Retour d'information continue et granulaire}
    La "granularité" d'un retour est le nombre d'options possibles. 
    Chaque exercice du Fugl-Meyer, par exemple, est noté sur trois points. Nous 
    aimerions proposer une alternative plus nuancée.
    L'argument pour le retour d'information rejoint celui de la "gamification"~:
    la notion de "sens" dans un jeu, au moins d'après Salen et Zimmerman, est 
    directement lié à la richesse de ce retour.
    
    % "Rules of Play" on "meaningful play"

	\chapter{Background}
	
	
		\section{Kinect}

			\subsection{Description}
La Kinect, connue à l'origine sous le nom "Project Natal" est une
périphérique informatique créé par Microsoft, comportant une caméra
couleur, un étalage de 4 microphones, des moteurs pour s'orienter avec 
accéléromètres 
et un système senseur de profondeur composé d'un 
projecteur infra-rouge et d'un capteur. 
  \begin{figure}[h!]
  \centering
  \includegraphics[width=0.8\linewidth]{images/kinect_diagram}
  \caption{Diagramme montrant les sous-systèmes de l'appareil Kinect.}
  \end{figure}
L'appareil n'utilise pas, comme on pourrait croire, le "Temps de Vol" pour
calculer la profondeur d'une scène. C'est en fait la déformation de chaqu'un de 
sa matrice de rayons infra-rouge,
lorsqu'ils frappent une surface, qui est mesuré. Cette technique dite de 
"Lumière Structuré"
lui permet de générer une image 3D d'une scène à une résolution de 640x480 avec 
une profondeur de 11 bits, qui sera mise à jour 30 fois par seconde.

			\subsection{Historique}
Sorti en Novembre 2010, le système était prévu à l'origine pour la console
de jeu de Microsoft, la "Xbox360". Comme la plupart des consoles et
périphériques de jeu elle
est donc vendu à perte, l'idée étant de récupérer l'argent perdu en vendant
des jeux. Ceci en fait l'appareil de son genre le moins cher et le plus couramment
disponible.

Il est donc peu surprenant que, dès sa sortie, des pilotes Libres et gratuits
ont été créés afin de permettre le détournement du périphérique par des
chercheurs et des amateurs. Microsoft a répondu en début de 2011 avec un
premier SDK pour Windows initialement peu complet. Des mises à jours et une
deuxième version, sortie en Octobre 2012, comblent ces lacunes.

		
		\section{Aspect médical} \label{lapeyronie}		%---GEOFFREY---
		% je commente, car je ris à chaque fois que je lis cette ligne :
%		PARLER DES DUDES QU'ON A RENCONTRE A PERLARONIE
Ce projet, d'un choix assumé par les étudiants et la société NaturalPad qui en est l'inspiratrice, comporte une composante recherche forte. C'est dans cette optique et comme expliqué en \ref{etude_terrain} que nous avons commencé notre projet par un travail d'investigation et de recherche d'informations. Dans ce but, nous avons rencontré des praticiens de l'hôpital Lapeyronie à Montpellier : Julien Métrot, doctorant du Laboratoire Movement To Health et Karima Bakhti, kinésithérapeute au CHU de Montpellier. Lors de cette entrevue, ils ont partagé avec nous leurs connaissances sur le test de Fugl Meyer et bien plus encore, et nous ont offert la possibilité d'assister à la réalisation d'un tel test sur une patiente atteinte d'hémiplégie.
	\subsection{Fugl Meyer}\label{fugl_meyer}
Le test de Fugl Meyer constitue un ensemble d'exercices à effectuer par le patient, et dont chaque mouvement est évalué selon un ou plusieurs critères, fournissant un score généralement compris entre 0 [échec], 1 [intermédiaire] et 2 [réussite]. Ces exercices peuvent concerner successivement les membres inférieurs et supérieurs, eux même divisés en sous catégories. Pour les membres supérieurs, on notera la présence d'un score \textit{proximal} et d'un score \textit{distal}. Ce test a pour vocation d'être réalisé régulièrement tout au long de la période de réhabilitation du patient, afin de mesurer ses progrès.
	\subsection{Réalisation du test}
				\subsubsection{Contexte}
Nous avons assisté à la passation d'un test de FM sur une jeune patiente atteinte d'une hémiplégie suite à un AVC ; ses membres supérieurs droits étaient affectés. Comme nous l'ont précisé J. Métrot et K. Bahkti, seules les parties du test concernant les membres supérieurs ont donc bien sur été réalisées. Pour les détails des mesures et exercices effectués lors de ce test, se référer à l'annexe \ref{evaluation_FM}.

				\subsubsection{À noter}
Les patients concernés par la rééducation des membres supérieurs, comme la patiente qui a accepté de passer 
le FM en notre présence, sont globalement plus nombreux. Cela concorde avec les contraintes du capteur Kinect, 
qui possède un petit angle de vue. Il est alors nécessaire d'avoir beaucoup d'espace (de recul) dès lors que 
l'on souhaite capter l'intégralité d'une personne de manière précise. \\
Lors des tests, le médecin ou personnel médical s'occupant du patient, peut être amené à 'aider' celui-ci.
Cela peut se traduire, outre les éventuels encouragements oraux, en maintenant ou en bloquant un membre du patient
non directement concerné par l'exercice du test. Par exemple, lorsque l'on demande au patient de "tourner son avant 
bras" (prono-supination de l'avant bras) avec le bras tendu, le praticien peut aider le patient à maintenant son bras
(partie haute).\\
Notons aussi qu'en l'occurrence, les praticiens n'ont pas eu besoin d'utiliser de goniomètre ou autre instrument de 
mesure pour évaluer la qualité des gestes de la patiente.
		
	\subsection{L'avis des professionnels}
	Le test de Fugl Meyer est le plus répandu et accepté : il constitue le "gold standard" dans le milieu.
	Nos interlocuteurs regretteront toutefois une certaine subjectivité et interprétation des résultats.
	Nous en avons d'ailleurs eu une démonstration lors de ce test : il arrivait que K. Bahkti et J. Métrot 
	évalue différemment les mouvements de la patiente. \\
Une autre critique est "l'effet plateau" qu'induit ce test. En effet, l'échelle de mesure est très petite 
(2, maximum 3 valeurs de notation) et le patient atteindra régulièrement des 'seuils' sur son score global. 
C'est-à-dire que même si il réalise encore des progrès par rapport aux fois précédentes, cela ne se pas forcément 
visible et impactant sur le score global, à cause du manque de granularité de la mesure. Même si cela n'est pas une 
fin en soi, on peut noter l'aspect peu encourageant que cela peut apporter au patient. \\
Pour les mêmes raisons, le patient pourra obtenir un score maximal (dans notre étude de cas, 66/66) sans pour autant
avoir recouvré la totalité de ses capacités, et quand bien même des progrès sont encore possibles. \\
Cela amène au regret que le test standard soit un test jugeant la \textbf{déficience} et non la \textbf{fonctionnalité}. 
Il existe cependant de nombreux autres tests, et une des alternatives intéressante est le test "ARAT : 
Action Research Arm Test". %TODO réf lien
Rapidement, ce test consiste à vérifier si un patient est capable d'effectuer un geste du quotidien (déplacer
un objet, se servir un verre d'eau, etc), et de chronométrer le temps que cela lui a pris. C'est donc un test 
de fonctionnalité.
	
	\subsubsection{Impressions et propositions}
Après notre entretien et cette passation du test de FM, et à partir de nos tests préliminaires, nous en avons 
conclu que l'utilisation du kinect semblerait plus adaptée pour faire une évaluation des performances “proximales”.
En effet, la taille des membres et l'amplitude des gestes requis pour l'évaluation proximale offrent de bien 
meilleures possibilités d'analyse des mouvements. Certains gestes du poignet semblerait aussi bien adaptés.
\paragraph{}En revanche, les autres mouvements distaux semblent trop difficile à percevoir et interpréter par le capteur.
L’idée serait de proposer une évaluation de grain plus fine, allant au delà d’une évaluation ternaire entre 
“a réussi à lever le bras à l’horizontal”, “a levé son bras partiellement” et “n’a pas réussi à lever son bras”. 
Il serait utile de pouvoir donner l’angle exact, par exemple.   

\paragraph{}Les tests sur la main sont évalués de manière “tactile” (tests de résistance, de préhension) pour la plupart, 
avec peu de différence visuelle entre une évaluation 0 et 2. L’utilisation de la Kinect semble alors peu pertinente
pour cette partie de l’évaluation.
		
	\chapter{État de l'art}
	
  \section{Bibliothèques Kinect}
  \include{kinect_libraries}
  
  \section{"Interaction naturelle" et rehabilitation}
  \include{natural_interaction_rehabilitation}
	
% ------------------------------------------------------------------------------  
% ------------------------------------------------------------------------------  
% ------------------------------------------------------------------------------  
	
	\chapter{Propositions}
	
		\section{Solutions}
    \subsection{Outils et technologies} 
    \include{tools_and_technologies}
    
		\subsection{Cahier de charges / user stories} 		%---GEOFFREY--
		
		MAINTENANT QU'ON A FINI NOTRE ETUDE DE TERRAIN ON PROPOSE L'APPLICATION PARFAITE 
		
		ou pas - m'enfin bref.
		
		- faire les 4 exerices dont on a parlé
		-- pourquoi ces 4 là? Pourquoi pas les autres?
		--- problème pour les jambes (distances, bizarreté)
		--- problème pour mesurer la rotation (extrapolés)
		--- problème pour mesurer les doigts 
		
		- fournir un 'score' plus précis que celui que propose la FM
		-- l'angle exacte auquel on est arrivé
		-- savoir combien on a progrésé
		
		- tester si le patient fait un mouvement 'illegal'
		-- le prevenir
		-- recommencer le teste
		
		
		- gamification
		-- environnement agréeable
		-- ??? pourquoi ça s'applique mal
		--- mieux les truc répétifs (le FM on le fait genre une fois par semaine!)
		--- cela étant, les notions de feedback, d'intéractions 
			'meaningful play = integrated + discernable' (Rules of Play) les actions ont un 
			impact et on sait lequel. 
		
		\section{Mise en oeuvre} 	%	---WILLIAM + GEOFFREY--

		Grapher
		- FailGrapher (montre la croix en plus de la progression)
		
		Multicamera
		
		ExerciseMonitor
		- FlexionMontior et compagnie
		
		Machine à états (on aime bien les trucs visuels dans les rapports)
		
		\section{Résultats}\label{resultats} %TODO  Important, en mon humble avis
		
		\section{Limites} \label{limites}%		---GEOFFREY--
			\subsection{Test de Fugl Meyer}
Comme indiqué précédemment, ce test constitue le standard en la matière et on ne peut donc pas passer à coté en premier lieu.
Cependant, les exercices et le test en lui-même ont pour vocation de rapidement évaluer les capacités ou déficiences
du patient. La plupart des exercices du test ne dure ainsi que quelques secondes. Cela, couplé au fait que tous les 
médecins ne font pas faire chaque partie du test, ni surtout dans le même ordre, implique pour notre application une interface permettant de choisir quelle partie du test exécuter. Le problème que l’on peut voir, c'est qu'en pratique, on passerait 
plus de temps dans cette interface que dans les "jeux" à proprement parler.

\paragraph{}
D'après notre observation de la réalisation d'un test avec une jeune patiente, celle-ci focalise 
beaucoup son regard sur les membres concernés par l'exercice. Il nous a été confirmé que c'était un fait fréquent
chez les patients, notamment en début de réhabilitation. Pour cette raison, il n'est pas possible de leur
demander de regarder un écran tant qu'ils exécutent un mouvements leur demandant un effort particulier.
On retrouve aussi un test qui demande au patient de fermer les yeux.

\paragraph{}
Par ailleurs, les tests distaux (mains et poignets) nécessitent une précision que ne permet pas la kinect.
Pour les mains, les test sont évalués de manière tactile (tests de résistance, de préhension) pour la plupart, 
avec peu de différence visuelle entre une évaluation 0 et 2. L’utilisation de la Kinect semble alors 
peu pertinente pour cette partie de l’évaluation..

\paragraph{}
On rappellera le problème de "l'effet plateau", du à un manque de granularité de l'évaluation, et la possibilité
d'obtention d'un score maximal sans pour autant avoir atteint une guérison complète. Rappelons aussi la variabilité
des évaluations par les praticiens, et le problème que cela implique de trouver une manière "neutre" d'interprêter
les mouvements du patient.
Enfin, les gestes demandés par FM sont très précis et non modifiables. Cela peut limiter les possibilités de “gamification”.
		
			\subsection{Zigfu}
Unity se trouve être un très bon outil de prototypage, permettant des résultats probants rapidement. Pour notre projet, il était nécessaire d'utiliser la surcouche de Zigfu pour faire le lien entre Unity et le SDK d'OpenNI. Celle-ci s'est cependant révélée être très peu documentée, obscure à comprendre -pas de tutoriel officiel, les autres étant rares et pas à jour ; code non ouvert- et finalement même mal écrite. Leur apport sur le projet d'OpenNI reste mince mais ils profitent d'un marché encore vide de concurrence pour bénéficier d'une visibilité intéressante. Pour ne pas noircir complètement le tableau, l'outil se révèle assez appropriable et les samples proposés assez explicites quant aux possibilités offertes. On notera toutefois un problème de compatibilité puisque certains de ces samples ne marchaient pas sur certaines machines.
		
		\subsection{Capteur Kinect}
A l'heure actuelle, ni le SDK de Microsoft ni celui d'OpenNI se sont capables de mesurer directement les valeurs de rotations des 
différents membres du corps. Ces dernières sont calculées et déduites à partir des valeurs de positions. Si cela n'est pas gênant en soi, cela devient problématique lorsque, comme dans notre cas, nous cherchons à mesurer finement ces valeurs dans un but thérapeutique. Une erreur d'approximation fausserait ainsi les résultats, leur retirant tout crédit.
De plus, la plupart des test distaux requiert une mesure de membres pas encore reconnus par le système : doigts, orteils.
De même, les tests nécessitant une mesure tactile (résistance, préhension) ne sont pas adaptés à une utilisation par un système visuel comme le capteur Kinect. Il en résulte un test du Fugl Meyer tronqué et finalement plus long à réaliser.

\paragraph{Remarque :\\}
Un autre élément à prendre en compte, est bien sur la santé du patient. Les tests, quels qu'ils soient, ne cherchent qu'à mesurer
les capacités actuelles du patient, et en aucun cas à l'inciter à se dépasser. Nous avons pu constater lors de la passation
du test de FM à l'hôpital Lapeyronie, que les médecins répétaient bien à la patiente de ne pas forcer ou de ne pas faire un geste
si cela lui faisait mal.\\
Ainsi pour notre application ou toute autre, il s'agit de ne pas imaginer un feedback trop incitateur ni d'exhorter le patient à 
accomplir son exercice. Si un patient n'arrive pas à réaliser un mouvement complet, le feedback ne doit pas l'encourager à forcer plus qu’il ne peut raisonnablement le faire.
		
		\section{Ouverture}	%	---GEOFFREY--
Nous avons vu dans la partie Résultats (\ref{resultats}) qu'il était effectivement possible de proposer un prototype offrant un aperçu des possibilités de l'utilisation d'un capteur comme le Kinect dans la réalisation de tests sensorimoteurs. Cependant, à la vue du certain nombre de contraintes que nous avons pu soulever en \ref{limites}, nous sommes arrivés à la conclusion qu'en l'état, le test de Fugl Meyer n'était pas le plus adapté. 

\paragraph{}
Cela amène à une réflexion, qui serait d'orienter un éventuel développement futur plutôt vers des exercices de rééducation ou d'autres types de tests que vers les exercices du test de Fugl Meyer. Comme nous avons pu le dire, il existe bien d'autres tests 
dans le domaine de la réhabilitation\,\footnote{voir l'Analyse de la littérature \textit{Evaluation of the disabilities of hemiplegic patients [M.-C. Gellez-Leman et al.]}}. Nous citerons notamment un test que nous a vanté J. Métrot lors de notre passage à 
Lapeyronie, ARAT.
\paragraph{Action Research Arm Test” (ARAT) \\}
ARAT est un test fonctionnel et non de déficience, se concentrant sur ce sur quoi le patient est capable de réaliser, et
qui a un véritable intérêt dans ses gestes quotidien. On chronomètre le temps mis pour ramasser des objets de diverses tailles,
pour mettre la main à la bouche (intérêt pour se nourrir) ou encore le temps mis pour transvaser de l'eau d'un verre à un autre.
\\ On notera que ce genre de test est beaucoup plus facilement intégrable dans une application de contrôle. Il suffit en effet de 
lancer un chrono et de valider si oui oui non le patient arrive à atteindre la consigne, sans considération pour des informations
comme ses tremblements ou des gestes parasites, compensations etc. Par ailleurs, les tests fonctionnels se prêtent beaucoup
plus à une éventuelle "gamification". Une interface graphique proposant au joueur/patient de réaliser des actions pré-établies (avec éventuellement des objets préalablement désignés) correspondant aux mouvements moteurs du test, semble offrir bien
plus de possibilités.

\paragraph{Interface Orale}
Une des remarques mise en avant était le risque de passer plus de temps à naviguer entre les différentes scènes de jeu/test à cause de la courte durée des exercices, et de leur ordre indéfini. Une solution pourrait être de proposer un système de 
commandes vocales qui permettraient de s'affranchir d'une GUI intermédiaire, et de changer aisément de scène.
\paragraph{Projet de stage} %TODO william je te laisse voir ça?
		- projet de stage avec NaturalPad: faire de extraction de squelette moins nul		
		- possibilités de concurrence avec Zigfu vu qu'il a juste repris 
		
    \section{Références}
    \include{references}
    
\part{Annexes}
	\chapter{Fiche d'évaluation du score de FM pour les membres supérieurs} \label{evaluation_FM}
	%TODO \includegraphics[scale=1]{scan_fichie_evalation.jpngif}
\end{document}
